<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Página</title>
    <link rel="stylesheet" href="styles.css">
</head>
    <style>

    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

header {
    background-color: #4CAF50;
    color: white;
    padding: 10px;
    text-align: center;
}

.container {
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #ddd;
    background: #f9f9f9;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}

.form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

#generated-page {
    display: none;
    margin: 20px auto;
    width: 210mm;
    height: 297mm;
    background: white;
    border: 1px solid #000;
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.button-container {
    display: flex;
    justify-content: center;
    margin-top: 10px;
}

.button-container button {
    background: none;
    border: 1px dashed #aaa;
    padding: 5px 10px;
    cursor: pointer;
    color: #555;
}

.button-container button:hover {
    background: #ddd;
}

.button-container button:active {
    background: #bbb;
}

.popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
}

.popup-content {
    background: white;
    padding: 20px;
    border-radius: 5px;
    width: 400px;
    display: flex;
    flex-direction: column;
}

.popup-timer {
    margin-top: 10px;
}

#training-signature {
    border: 1px solid #ccc;
    margin-bottom: 10px;
}

#download-section {
    margin-top: 20px;
}

#training-table {
    width: 100%;
    border-collapse: collapse;
}

#training-table th, #training-table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

#training-table th {
    background-color: #f3f3f3;
}

/* Estilo para as seções */
.section {
    margin-bottom: 20px;
    border: 1px dashed #ccc;
    padding: 10px;
}

.section-title {
    font-size: 1.2em;
    margin-bottom: 10px;
}

.section-content {
    margin-top: 10px;
}

/* Estilo para a imagem dentro de um quadrado invisível */
.image-box {
    width: 8cm;
    height: 8cm;
    overflow: hidden;
    display: inline-block;
    position: relative;
}

.image-box img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

 
    </style>
<body>
<header>
<h1>Gerador de Página</h1>
</header>

<div class="container">
    <div class="form-group">
        <label for="title">Título:</label>
        <input type="text" id="title" placeholder="Digite o título">
    </div>

    <div class="form-group">
        <label for="responsible">Responsável:</label>
        <input type="text" id="responsible" placeholder="Digite o responsável">
    </div>

    <div class="form-group">
        <label for="date">Data:</label>
        <input type="date" id="date">
    </div>

    <button onclick="generatePage()">Gerar Página</button>
</div>

<div id="generated-page">
    <div class="header-info">
        <div id="header-title"></div>
        <div id="header-responsible"></div>
        <div id="header-date"></div>
    </div>
    <div id="content"></div>
</div>

<div class="button-container">
    <button onclick="addSection()">Adicionar Sessão</button>
    <button onclick="addText()">Adicionar Texto</button>
    <button onclick="addImage()">Adicionar Imagem</button>
    <button onclick="openTrainingPopup()">Inserir Treinamento</button>
</div>

<div id="training-popup" class="popup">
    <div class="popup-content">
        <h3>Inserir Treinamento</h3>
        <label for="training-title">Título:</label>
        <input type="text" id="training-title" placeholder="Título do treinamento">
        <label for="training-location">Local:</label>
        <input type="text" id="training-location" placeholder="Local do treinamento">
        <label for="training-sector">Setor:</label>
        <input type="text" id="training-sector" placeholder="Setor">
        <label for="training-instructor">Ministrante:</label>
        <input type="text" id="training-instructor" placeholder="Ministrante">
        <label for="training-signature">Assinatura:</label>
        <canvas id="training-signature" width="300" height="100"></canvas>
        <div class="popup-timer">
            <span id="timer">00:00</span>
        </div>
        <button onclick="startStopTimer()">Iniciar/Parar Cronômetro</button>
        <button onclick="saveTraining()">Salvar</button>
        <button onclick="closeTrainingPopup()">Cancelar</button>
    </div>
</div>

<div id="download-section">
    <button onclick="downloadCSV()">Baixar CSV</button>
    <table id="training-table">
        <thead>
            <tr>
                <th>Título</th>
                <th>Local</th>
                <th>Setor</th>
                <th>Ministrante</th>
                <th>Assinatura</th>
                <th>Tempo</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script src="script.js"></script>
<script>
let sessionCount = 0;
let trainingData = [];
let timerInterval;
let timeElapsed = 0;
let isTimerRunning = false;

function addSession() {
    sessionCount++;
    const title = prompt("Digite o título da sessão:");
    const location = prompt("Digite o local da sessão:");
    const sector = prompt("Digite o setor da sessão:");
    const instructor = prompt("Digite o nome do instrutor:");

    if (title && location && sector && instructor) {
        const sessionContainer = document.createElement('div');
        sessionContainer.classList.add('session');

        const sessionTitle = document.createElement('h3');
        sessionTitle.textContent = `Sessão n. ${String(sessionCount).padStart(2, '0')}: "${title}"`;
        sessionContainer.appendChild(sessionTitle);

        const sessionContent = document.createElement('div');
        sessionContent.classList.add('session-content');

        const imgContainer = document.createElement('div');
        imgContainer.classList.add('img-container');
        const img = document.createElement('img');
        img.src = 'path/to/image.jpg'; // Substitua pelo caminho da imagem
        img.classList.add('session-image');
        imgContainer.appendChild(img);

        const textContainer = document.createElement('div');
        textContainer.classList.add('text-container');
        const textBox = document.createElement('textarea');
        textBox.classList.add('session-text');
        textBox.setAttribute('placeholder', 'Escreva aqui...');
        textBox.style.height = 'auto';
        textContainer.appendChild(textBox);

        sessionContent.appendChild(imgContainer);
        sessionContent.appendChild(textContainer);
        sessionContainer.appendChild(sessionContent);

        // Adicionando dados à tabela
        const sessionData = {
            title,
            location,
            sector,
            instructor,
            signature: '', // Defina ou obtenha a assinatura conforme necessário
            time: '00:00', // Ajuste o tempo conforme necessário
        };

        trainingData.push(sessionData);
        updateTrainingTable();
        document.getElementById('sessions').appendChild(sessionContainer);
    } else {
        alert("Por favor, preencha todos os campos!");
    }
}

function startStopTimer() {
    if (isTimerRunning) {
        clearInterval(timerInterval);
    } else {
        startTimer();
    }
    isTimerRunning = !isTimerRunning;
}

function startTimer() {
    timerInterval = setInterval(() => {
        timeElapsed++;
        const minutes = Math.floor(timeElapsed / 60);
        const seconds = timeElapsed % 60;
        document.getElementById('timer').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }, 1000);
}

function saveTraining() {
    const title = document.getElementById('training-title').value;
    const location = document.getElementById('training-location').value;
    const sector = document.getElementById('training-sector').value;
    const instructor = document.getElementById('training-instructor').value;
    const signatureCanvas = document.getElementById('training-signature');
    const signatureData = signatureCanvas.toDataURL();

    if (title && location && sector && instructor) {
        trainingData.push({
            title,
            location,
            sector,
            instructor,
            signature: signatureData,
            time: document.getElementById('timer').textContent,
        });

        updateTrainingTable();
        closeTrainingPopup();
    } else {
        alert("Por favor, preencha todos os campos!");
    }
}

function updateTrainingTable() {
    const tableBody = document.querySelector('#training-table tbody');
    tableBody.innerHTML = '';
    trainingData.forEach(training => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${training.title}</td>
            <td>${training.location}</td>
            <td>${training.sector}</td>
            <td>${training.instructor}</td>
            <td><img src="${training.signature}" alt="Assinatura" width="50" height="50"></td>
            <td>${training.time}</td>
        `;
        tableBody.appendChild(row);
    });
}

function downloadCSV() {
    const csvContent = [
        ["Título", "Local", "Setor", "Ministrante", "Assinatura", "Tempo"],
        ...trainingData.map(t => [
            t.title, 
            t.location, 
            t.sector, 
            t.instructor, 
            t.signature, 
            t.time
        ])
    ]
    .map(e => e.join(","))
    .join("\n");

    const blob = new Blob([csvContent], { type: 'text/csv' });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "treinamentos.csv";
    link.click();
}

function closeTrainingPopup() {
    document.getElementById('training-popup').style.display = 'none';
    clearInterval(timerInterval);
}

</script>
</body>
</html>
